<script type="importmap">
{
  "imports": {
    "firebase/": "https://esm.sh/firebase@^12.6.0/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/"
  }
}
</script>
        // --- NEW DATA ARCHITECTURE: CATEGORIZED TRACKS ---
        
        const lessons = {
            math: {
                id: "MAT",
                title: "Matem√°tica Aplicada",
                subtitle: "O Ferramental",
                icon: "üìê",
                description: "Domine o c√°lculo necess√°rio para entender os modelos econ√¥micos.",
                modules: [
                    {
                        id: "1-00", // ID solicitado
                        title: "Pr√©-C√°lculo: Fun√ß√µes",
                        status: "unlocked", 
                        questions: [
                            {
                                topic: "Fun√ß√µes Lineares",
                                question: "Uma firma tem custo fixo de R$ 100 e custo vari√°vel de R$ 5 por unidade. Qual a fun√ß√£o Custo Total C(q)?",
                                hint: "Pense na estrutura: Custo Total = Parte Fixa + (Custo Unit√°rio √ó Quantidade).",
                                options: [
                                    { text: "C(q) = 100 + 5q", correct: true },
                                    { text: "C(q) = 5 + 100q", correct: false },
                                    { text: "C(q) = 105q", correct: false }
                                ],
                                explanation: "Em C(q) = a + bq, 'a' √© o intercepto (custo fixo, n√£o depende de q) e 'b' √© a inclina√ß√£o (custo marginal/vari√°vel)."
                            }
                        ]
                    },
                    {
                        id: "1-0", // ID solicitado
                        title: "Derivadas B√°sicas",
                        status: "locked",
                        questions: []
                    }
                ]
            },
            micro: {
                id: "MIC",
                title: "Microeconomia",
                subtitle: "Agentes e Escolhas",
                icon: "üõí",
                description: "Teoria do Consumidor, Firma e Estruturas de Mercado.",
                modules: [
                    {
                        id: "MIC-01",
                        title: "Teoria do Consumidor",
                        status: "unlocked",
                        questions: [
                            // GASING + CPA: CONCRETO (Story/Analogy)
                            {
                                topic: "1. Prefer√™ncias (Concreto)",
                                question: "Imagine que voc√™ est√° na cantina. Voc√™ gosta tanto de Caf√© (X) quanto de P√£o de Queijo (Y). Se eu tirar 1 P√£o de Queijo seu, quantos Caf√©s eu preciso te dar para voc√™ ficar IGUALMENTE feliz?",
                                hint: "Estamos buscando uma troca que mantenha sua satisfa√ß√£o constante. Isso √© a base da 'Indiferen√ßa'.",
                                options: [
                                    { text: "A quantidade exata que compensa a perda, mantendo a Utilidade constante.", correct: true },
                                    { text: "O m√°ximo de caf√©s que eu puder comprar com meu dinheiro.", correct: false },
                                    { text: "Sempre 1 caf√© por 1 p√£o de queijo, independente de quantos eu j√° tenho.", correct: false }
                                ],
                                explanation: "GASING (Story): Isso define a Taxa Marginal de Substitui√ß√£o (TMS). Se voc√™ troca X por Y e continua com a mesma 'felicidade', voc√™ est√° andando sobre uma Curva de Indiferen√ßa."
                            },
                            // GASING + CPA: PICT√ìRICO (Visual Analogy)
                            {
                                topic: "2. Curvas de Indiferen√ßa (Visual)",
                                question: "Pense em uma Montanha (O Morro da Utilidade). A altura da montanha representa sua felicidade. O que representa uma Curva de Indiferen√ßa nesse mapa?",
                                hint: "Se voc√™ caminhar ao redor da montanha sem subir nem descer, voc√™ mant√©m a mesma altura.",
                                options: [
                                    { text: "√â como uma curva de n√≠vel no mapa: todos os pontos na linha t√™m a mesma altura (utilidade).", correct: true },
                                    { text: "√â o caminho mais r√°pido para chegar ao topo da montanha.", correct: false },
                                    { text: "√â a inclina√ß√£o da subida em um ponto espec√≠fico.", correct: false }
                                ],
                                explanation: "GASING (Analogy): Assim como em um mapa topogr√°fico, onde linhas conectam pontos de mesma altitude, a Curva de Indiferen√ßa conecta cestas de bens (X, Y) que d√£o o mesmo n√≠vel de satisfa√ß√£o."
                            },
                            // GASING + CPA: ABSTRATO (Numbers/Formula)
                            {
                                topic: "3. Fun√ß√£o Utilidade (Abstrato)",
                                question: "Vamos formalizar. Seja U(x, y) = x ¬∑ y (Cobb-Douglas). A Cesta A tem (x=2, y=8) e a Cesta B tem (x=4, y=4). Qual cesta o consumidor prefere?",
                                hint: "Calcule U para os dois casos multiplicando x por y.",
                                options: [
                                    { text: "O consumidor √© Indiferente (ambas geram U = 16).", correct: true },
                                    { text: "Prefere a Cesta A porque tem mais Y.", correct: false },
                                    { text: "Prefere a Cesta B porque √© mais equilibrada.", correct: false }
                                ],
                                explanation: "CPA (Abstract): U(A) = 2*8 = 16. U(B) = 4*4 = 16. Como U(A) = U(B), ambas as cestas est√£o na mesma Curva de Indiferen√ßa (U=16)."
                            }
                        ]
                    }
                ]
            },
            macro: {
                id: "MAC",
                title: "Macroeconomia",
                subtitle: "Sistemas Econ√¥micos",
                icon: "üè¶",
                description: "PIB, Infla√ß√£o, C√¢mbio e Modelos IS-LM-BP.",
                modules: [
                    {
                        id: "MAC-01",
                        title: "Contabilidade Nacional",
                        status: "unlocked",
                        questions: [
                            {
                                topic: "Identidades B√°sicas",
                                question: "Em uma economia aberta, partindo da identidade S - I = NX. Se o Investimento (I) supera a Poupan√ßa Dom√©stica (S), como isso √© financiado?",
                                hint: "Se falta dinheiro interno (S), precisamos pegar de fora.",
                                options: [
                                    { text: "Atrav√©s de Poupan√ßa Externa (D√©ficit em Transa√ß√µes Correntes).", correct: true },
                                    { text: "Atrav√©s de aumento de exporta√ß√µes.", correct: false },
                                    { text: "O investimento deve ser reduzido obrigatoriamente.", correct: false }
                                ],
                                explanation: "S < I implica que NX < 0 (D√©ficit Comercial). O pa√≠s importa capitais (Poupan√ßa Externa > 0) para fechar a conta."
                            }
                        ]
                    },
                    {
                        id: "MAC-02",
                        title: "Simulador Mundell-Fleming",
                        status: "unlocked",
                        type: "simulation",
                        questions: []
                    }
                ]
            }
        };